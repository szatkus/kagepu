!function(e){function t(t){for(var n,o,i=t[0],a=t[1],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);d.length;)d.shift()()}var n={},r={7:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=i);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=function(e){return o.p+""+({0:"common"}[e]||e)+"-"+{0:"59cf1a"}[e]+".js"}(e);var c=new Error;a=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:u})}),12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="dist/",o.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=a;o(o.s=21)}({10:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))};let o=!1;function i(){return navigator.gpu||(document.getElementById("not-supported").style.display="block",o||alert("WebGPU not supported! Please visit webgpu.io to see the current implementation status."),o=!0),!!navigator.gpu}function a(e,t,n){return r(this,void 0,void 0,(function*(){const r=document.createElement("img");r.src=t,yield r.decode();const o=document.createElement("canvas");o.width=r.width,o.height=r.height;const i=o.getContext("2d");i.translate(0,r.height),i.scale(1,-1),i.drawImage(r,0,0,r.width,r.height);const a=i.getImageData(0,0,r.width,r.height);let u=null;const c=256*Math.ceil(4*r.width/256);if(c==4*r.width)u=a.data;else{u=new Uint8Array(c*r.height);for(let e=0;e<r.height;++e)for(let t=0;t<r.width;++t){let n=4*t+e*c;u[n]=a.data[n],u[n+1]=a.data[n+1],u[n+2]=a.data[n+2],u[n+3]=a.data[n+3]}}const d=e.createTexture({size:{width:r.width,height:r.height,depth:1},format:"rgba8unorm",usage:GPUTextureUsage.COPY_DST|n}),l=e.createBuffer({size:u.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC});l.setSubData(0,u);const s=e.createCommandEncoder({});return s.copyBufferToTexture({buffer:l,rowPitch:c,imageHeight:0},{texture:d},{width:r.width,height:r.height,depth:1}),e.defaultQueue.submit([s.finish()]),d}))}},11:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=void 0;navigator.gpu&&(r=GPUDevice.prototype.createShaderModule);var o={code:void 0,label:void 0};function i(e){return e.transform&&e.source?o.code=e.transform(e.source):o.code=e.code,r.call(this,o)}function a(){navigator.gpu&&r!==i&&(GPUDevice.prototype.createShaderModule=i)}}])},function(e,t,n){"use strict";n.r(t);var r=function(e){return e&&{module:e.module,entryPoint:e.entryPoint}},o=function(e){return e&&{frontFace:e.frontFace,cullMode:e.cullMode,depthBias:e.depthBias,depthBiasSlopeScale:e.depthBiasSlopeScale,depthBiasClamp:e.depthBiasClamp}},i=function(e){return e&&{format:e.format,alphaBlend:e.alphaBlend,colorBlend:e.colorBlend,writeMask:e.writeMask}},a=function(e){return e&&{compare:e.compare,failOp:e.failOp,depthFailOp:e.depthFailOp,passOp:e.passOp}},u=function(e){return e&&{format:e.format,depthWriteEnabled:e.depthWriteEnabled,depthCompare:e.depthCompare,stencilFront:a(e.stencilFront),stencilBack:a(e.stencilBack),stencilReadMask:e.stencilReadMask,stencilWriteMask:e.stencilWriteMask}},c=function(e){return e&&{offset:e.offset,format:e.format,shaderLocation:e.shaderLocation}},d=function(e){if(e){if(!e.attributes)throw new Error("Missing attributes");if("function"!=typeof e.attributes[Symbol.iterator])throw new Error("attributes is not iterable");return{arrayStride:e.arrayStride,stepMode:e.stepMode,attributes:Array.from(e.attributes,c)}}},l=function(e){if(e){if(e.vertexBuffers&&"function"!=typeof e.vertexBuffers[Symbol.iterator])throw new Error("vertexBuffers is not iterable");return{indexFormat:e.indexFormat,vertexBuffers:e.vertexBuffers&&Array.from(e.vertexBuffers,d)}}},s="__WEBGPU_LIVE_SHADER_INFO__",f=function(){return Math.random().toString(36).substring(2,15)};function p(e,t,n){if(s in n)return n[s];var r={device:e,descriptor:t,id:f(),generation:0};return n[s]=r,r}function h(e){return e[s]}function m(e){return e[s]}var v=function(){function e(e,t){this._registrationGeneration=1,this._shaderModuleUpdates=new Map,this._fn=e,this._onShaderRegistered=t}return e.prototype.createShaderModule=function(e,t){t=function(e){return e&&{code:e.code,source:e.source,transform:e.transform}}(t);var n=this._fn.createShaderModule.call(e,t);return p(e,t,n),n},e.prototype.createRenderPipeline=function(e,t){t=function(e){if(e){if(!e.colorStates)throw new Error("Missing colorStates");if("function"!=typeof e.colorStates[Symbol.iterator])throw new Error("colorStates is not iterable");return{layout:e.layout,vertexStage:r(e.vertexStage),fragmentStage:r(e.fragmentStage),primitiveTopology:e.primitiveTopology,rasterizationState:o(e.rasterizationState),colorStates:Array.from(e.colorStates,i),depthStencilState:u(e.depthStencilState),vertexState:l(e.vertexState),sampleCount:e.sampleCount,sampleMask:e.sampleMask,alphaToCoverageEnabled:e.alphaToCoverageEnabled}}}(t);var n=this._fn.createRenderPipeline.call(e,t);return function(e,t,n){if(s in n)return n[s];var r={device:e,descriptor:t,registrationGeneration:0,vertexStageGeneration:0,fragmentStageGeneration:0,computeStageGeneration:0};n[s]=r}(e,t,n),n},e.prototype.createComputePipeline=function(e,t){t=function(e){return e&&{layout:e.layout,computeStage:r(e.computeStage)}}(t);var n=this._fn.createComputePipeline.call(e,t);return function(e,t,n){if(s in n)return n[s];var r={device:e,descriptor:t,registrationGeneration:0,vertexStageGeneration:0,fragmentStageGeneration:0,computeStageGeneration:0};n[s]=r}(e,t,n),n},e.prototype.registerShaderStage=function(e){var t=this;if(e&&e.module){var n=h(e.module);this._onShaderRegistered&&n.descriptor.source&&n.descriptor.transform&&this._onShaderRegistered(n.descriptor.source,(function(e){t._shaderModuleUpdates.set(n.id,e)}))}},e.prototype.registerRenderPipelineShaders=function(e){var t=m(e);if(t.registrationGeneration!==this._registrationGeneration){t.registrationGeneration=this._registrationGeneration;var n=t.descriptor;this.registerShaderStage(n.vertexStage),this.registerShaderStage(n.fragmentStage)}},e.prototype.registerComputePipelineShaders=function(e){var t=m(e);if(t.registrationGeneration!==this._registrationGeneration){t.registrationGeneration=this._registrationGeneration;var n=t.descriptor;this.registerShaderStage(n.computeStage)}},e.prototype.updateShaderStage=function(e){if(e&&e.module){var t=h(e.module);if(this._shaderModuleUpdates.has(t.id)){var n=this._shaderModuleUpdates.get(t.id);t.descriptor.source=n,this._shaderModuleUpdates.delete(t.id);try{var r=this._fn.createShaderModule.call(t.device,t.descriptor);p(t.device,t.descriptor,r),Object.assign(h(r),t),t.replacement=r,t.generation+=1}catch(e){console.error(e)}}return t.generation}},e.prototype.updatePipeline=function(e){if(0!==this._shaderModuleUpdates.size){var t=m(e),n=t.descriptor,r=void 0,o=void 0,i=void 0;"vertexStage"in n&&(r=this.updateShaderStage(n.vertexStage)),"fragmentStage"in n&&(o=this.updateShaderStage(n.fragmentStage)),"computeStage"in n&&(i=this.updateShaderStage(n.computeStage));var a=void 0!==r&&r!==t.vertexStageGeneration,u=void 0!==o&&o!==t.fragmentStageGeneration,c=void 0!==i&&i!==t.computeStageGeneration;(a||u||c)&&(a&&(n.vertexStage.module=h(n.vertexStage.module).replacement),u&&(n.fragmentStage.module=h(n.fragmentStage.module).replacement),c&&(n.computeStage.module=h(n.computeStage.module).replacement),a||u?t.replacement=this._fn.createRenderPipeline.call(t.device,n):c&&(t.replacement=this._fn.createComputePipeline.call(t.device,n)))}},e.prototype.setRenderPipeline=function(e,t){return this.registerRenderPipelineShaders(t),this.updatePipeline(t),t=m(t).replacement||t,this._fn.setRenderPipeline.call(e,t)},e.prototype.setComputePipeline=function(e,t){return this.registerComputePipelineShaders(t),this.updatePipeline(t),t=m(t).replacement||t,this._fn.setComputePipeline.call(e,t)},e}(),g=n(0),y=n.n(g);function S(e){if(navigator.gpu){y()();var t=new v({createShaderModule:GPUDevice.prototype.createShaderModule,createRenderPipeline:GPUDevice.prototype.createRenderPipeline,createComputePipeline:GPUDevice.prototype.createComputePipeline,setRenderPipeline:GPURenderPassEncoder.prototype.setPipeline,setComputePipeline:GPUComputePassEncoder.prototype.setPipeline},e);Object.assign(GPUDevice.prototype,{createShaderModule:function(e){return t.createShaderModule(this,e)},createRenderPipeline:function(e){return t.createRenderPipeline(this,e)},createComputePipeline:function(e){return t.createComputePipeline(this,e)}}),Object.assign(GPURenderPassEncoder.prototype,{setPipeline:function(e){return t.setRenderPipeline(this,e)}}),Object.assign(GPUComputePassEncoder.prototype,{setPipeline:function(e){return t.setComputePipeline(this,e)}})}}n.d(t,"default",(function(){return S}))}])},21:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"helloTriangle",(function(){return i})),n.d(r,"helloTriangleMSAA",(function(){return a})),n.d(r,"rotatingCube",(function(){return u})),n.d(r,"twoCubes",(function(){return c})),n.d(r,"instancedCube",(function(){return d})),n.d(r,"texturedCube",(function(){return l})),n.d(r,"fractalCube",(function(){return s})),n.d(r,"computeBoids",(function(){return f})),n.d(r,"animometer",(function(){return p}));var o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))};const i=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,12))})),a=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,13))})),u=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,14))})),c=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,15))})),d=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,16))})),l=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,17))})),s=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,18))})),f=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,19))})),p=()=>o(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,20))}));var h=n(10),m=n(11),v=n.n(m),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))};const y=document.querySelector("main"),S=document.getElementById("description-container"),b=document.getElementById("canvas-container"),P=document.getElementById("shader-editor"),w=document.getElementById("full-source");function x(e,t){e.className=(e.className||"").replace(t,"")}v()((e,t)=>g(void 0,void 0,void 0,(function*(){const r=document.createElement("div");P.appendChild(r);const o=new(0,(yield n.e(0).then(n.t.bind(null,22,7))).default)(r,{value:e,lineNumbers:!0,lineWrapping:!0,theme:"monokai",extraKeys:{"Ctrl-S":function(){t(o.getValue())}}})})));let M=void 0;function _(e){return g(this,void 0,void 0,(function*(){if(!Object(h.a)())return void(y.className+=" no-demo");const t=e.substring(1);S.innerHTML="",b.innerHTML="",P.innerHTML="",w.innerHTML="",M=void 0;const n=r[t];if(!n)return void(y.className+=" no-demo");x(y,"no-demo");const o=yield n(),i=document.createElement("canvas");i.width=600,i.height=600,b.appendChild(i);const a=yield o.init(i);if(!a)return;const u=document.createElement("h1");u.innerHTML=o.title,S.appendChild(u),S.appendChild(document.createTextNode(o.description)),fetch(`./src/examples/${t}.ts`).then(e=>g(this,void 0,void 0,(function*(){const t=document.createElement("pre");t.innerHTML=yield e.text(),w.appendChild(t)}))),M=i,requestAnimationFrame((function e(t){M===i&&(a(t),requestAnimationFrame(e))}))}))}const C=document.querySelectorAll("a.nav-link");let O=void 0;C.forEach(e=>{e.addEventListener("click",()=>{void 0!==O&&x(O,"selected"),e.className+=" selected",O=e})}),window.addEventListener("popstate",()=>{_(window.location.hash)}),_(window.location.hash)}});
//# sourceMappingURL=main-bbae37.js.map